<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fuel Blend Calculator (Mass %)</title>
  <style>
    :root{
      --bg:#0b1220; --card:#121a2b; --card2:#0f1726; --text:#e7eefc; --muted:#a7b4d1;
      --line:rgba(255,255,255,.10); --accent:#62a8ff; --warn:#ffcc66;
    }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#070c16);color:var(--text)}
    .wrap{max-width:1020px;margin:0 auto;padding:24px}
    .topbar{display:flex;gap:14px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}
    .title{font-size:20px;font-weight:700;margin:0}
    .subtitle{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.4}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} }

    .card{background:rgba(18,26,43,.92);border:1px solid var(--line);border-radius:14px;padding:16px}
    .card h3{margin:0 0 10px;font-size:14px;letter-spacing:.2px;color:#d8e4ff}

    /* ===== Responsive input layout upgrades ===== */
    .row{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    @media (max-width:720px){ .row{grid-template-columns:1fr} }

    label{display:block;font-size:12px;color:var(--muted);margin:8px 0 6px}

    /* Prevent overflow in grid children */
    .row > div{min-width:0}

    select,input[type="text"],input[type="number"]{
      width:100%;
      max-width:100%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid var(--line);
      background:var(--card2);
      color:var(--text);
      outline:none;
      min-width:0;
    }

    input[type="range"]{width:100%;min-width:0}

    /* Slider line: stack on small screens */
    .sliderline{
      display:grid;
      grid-template-columns:110px 1fr 110px;
      gap:10px;
      align-items:center;
    }
    @media (max-width:520px){
      .sliderline{
        grid-template-columns:1fr;
        gap:8px;
      }
      .pill{width:100%;text-align:center}
    }

    .pill{
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(255,255,255,.04);
      font-size:12px;
      color:var(--text);
      min-width:0;
    }

    /* Make range boxes fit nicely */
    .rangeBox{
      border:1px solid var(--line);
      border-radius:12px;
      background:rgba(255,255,255,.02);
      padding:10px 10px 8px;
      min-width:0;
    }
    .rangeHead{display:flex;justify-content:space-between;align-items:baseline;gap:10px;margin-bottom:6px;flex-wrap:wrap}
    .rangeVal{
      padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:rgba(255,255,255,.04);
      font-size:12px;color:var(--text);white-space:nowrap
    }
    .rangeSub{display:flex;justify-content:space-between;margin-top:6px;color:var(--muted);font-size:11px}
    .rangeBtns{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .rangeBtns button{padding:7px 10px;font-size:12px}

    .note{margin-top:10px;font-size:12px;color:var(--muted);line-height:1.45}
    .warn{
      margin-top:10px;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,204,102,.35);
      background:rgba(255,204,102,.08);color:var(--warn);font-size:12px;line-height:1.45;display:none
    }

    .small{font-size:11px;color:var(--muted)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    button{
      padding:10px 12px;border-radius:10px;border:1px solid var(--line);
      background:rgba(255,255,255,.06);color:var(--text);cursor:pointer
    }
    button.primary{background:rgba(98,168,255,.18)}

    /* Output side styles kept minimal here */
    .barBox{
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.03);
      padding:12px;
      margin-top:12px;
    }
    .barTitleRow{display:flex;justify-content:space-between;align-items:baseline;gap:10px;margin-bottom:8px;flex-wrap:wrap}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div>
        <p class="title">Fuel Blend Calculator</p>
        <p class="subtitle">Two-component blending by <b>mass %</b>. Responsive inputs layout.</p>
      </div>
      <div class="small">Basis: <b>mass%</b> (A + B = 100)</div>
    </div>

    <div class="grid">
      <!-- Inputs -->
      <div class="card">
        <h3>Inputs</h3>

        <label for="fuelSearch">Search fuels (key or name)</label>
        <input id="fuelSearch" type="text" placeholder="Type to filter dropdowns..." />

        <div class="row" style="margin-top:8px">
          <div>
            <label for="fuelA">Fuel A</label>
            <select id="fuelA"></select>
          </div>
          <div>
            <label for="fuelB">Fuel B</label>
            <select id="fuelB"></select>
          </div>
        </div>

        <label>Blend ratio (mass %)</label>
        <div class="sliderline">
          <div class="pill" id="pillA">A: 70%</div>
          <input id="massA" type="range" min="0" max="100" step="1" value="70" />
          <div class="pill" id="pillB">B: 30%</div>
        </div>

        <label for="blendName">Optional blend name</label>
        <input id="blendName" type="text" placeholder="Leave blank for auto-name" />

        <div style="margin-top:14px; padding:12px; border:1px solid var(--line); border-radius:12px; background:rgba(255,255,255,.03)">
          <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap">
            <div style="font-weight:700; font-size:12px; color:#d8e4ff">Operating inputs (optional)</div>
            <div class="small">Enable ϕ, λ, sizing</div>
          </div>

          <div class="row" style="margin-top:10px">
            <div>
              <label for="afrActRange">Actual AFR (kg air / kg fuel)</label>
              <div class="rangeBox">
                <div class="rangeHead">
                  <div class="small">AFRact</div>
                  <div class="rangeVal mono" id="afrActVal">18.0</div>
                </div>
                <input id="afrActRange" type="range" min="5" max="35" step="0.1" value="18.0" />
                <div class="rangeSub"><span>5</span><span>35</span></div>
              </div>
            </div>

            <div>
              <label for="qthMWRange">Target thermal power Q̇ (MWₜₕ)</label>
              <div class="rangeBox">
                <div class="rangeHead">
                  <div class="small">Q̇</div>
                  <div class="rangeVal mono" id="qthMWVal">10.0</div>
                </div>
                <input id="qthMWRange" type="range" min="0" max="50" step="0.5" value="10.0" />
                <div class="rangeSub"><span>0</span><span>50</span></div>
              </div>
            </div>
          </div>

          <div class="note">
            On small screens, inputs stack; slider pills also stack.
          </div>
        </div>

        <div class="warn" id="warnBox"></div>
      </div>

      <!-- Outputs (placeholder) -->
      <div class="card">
        <h3>Outputs</h3>
        <div class="barBox">
          Your outputs section stays as-is. Paste your existing outputs HTML here (unchanged).
        </div>
      </div>
    </div>
  </div>

  <script>
    // Keep your existing JS (unchanged). This file only fixes responsive input layout CSS.
    // If you want, paste your full JS back below.
    const fuelA = document.getElementById("fuelA");
    const fuelB = document.getElementById("fuelB");
    const editKey = document.getElementById("editKey");
    const fuelSearch = document.getElementById("fuelSearch");

    // Minimal demo population so dropdowns show something immediately
    const FUELS = {
      JetA:{name:"Jet-A"},
      HEFA:{name:"HEFA-SPK"},
      LCH4:{name:"Liquid methane"}
    };

    function refillSelects(filter=""){
      const keys = Object.keys(FUELS).filter(k=>{
        const n = (FUELS[k].name||"").toLowerCase();
        const q = (filter||"").toLowerCase();
        return !q || k.toLowerCase().includes(q) || n.includes(q);
      });
      const opts = keys.map(k=>`<option value="${k}">${k} — ${FUELS[k].name}</option>`).join("");
      fuelA.innerHTML = opts;
      fuelB.innerHTML = opts;
      if (keys[0]) fuelA.value = keys[0];
      if (keys[1]) fuelB.value = keys[1];
    }

    fuelSearch.addEventListener("input", ()=>refillSelects(fuelSearch.value));
    refillSelects("");
  </script>
</body>
</html>
